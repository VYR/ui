<div fxLayout="row" fxLayoutGap="0.7rem" fxLayout.lt-md="column" fxLayoutWrap>
    <div fxFlex="100">
        <app-master-container>
            <ng-container header>Retrieve SWIFT Copy</ng-container>
            <ng-container body *ngIf="!isRequestSuccess">
                <form fxLayout="column" fxFlex="100" [formGroup]="swiftCopiesRequestForm">
                    <div fxLayout="column" fxLayoutGap="0.6rem">
                        <div fxLayout="row">
                            <mat-button-toggle-group
                                (change)="onTypeChange($event)"
                                formControlName="typeOfSwift"
                                aria-label="Select an option"
                            >
                                <mat-button-toggle value="TRANSFER">{{
                                    SWIFT_COPY_TYPES['TRANSFER']
                                }}</mat-button-toggle>
                                <mat-button-toggle value="LC">{{ SWIFT_COPY_TYPES['LC'] }}</mat-button-toggle>
                                <mat-button-toggle value="BG">{{ SWIFT_COPY_TYPES['BG'] }}</mat-button-toggle>
                            </mat-button-toggle-group>
                        </div>
                        <div fxLayout="row" fxLayoutGap="3%">
                            <div fxFlex="30" *ngIf="selectedType === 'TRANSFER'">
                                <app-account-select
                                    ngDefaultControl
                                    [formGroup]="swiftCopiesRequestForm"
                                    formControlName="fromAccount"
                                    (selectionChange)="onAccountChange($event)"
                                    label="Debit Account"
                                    [options]="accounts"
                                >
                                </app-account-select>
                            </div>
                            <div fxFlex="30">
                                <app-cib-date-picker
                                    [parentForm]="swiftCopiesRequestForm"
                                    [fomrControlName]="'requestDate'"
                                    [maxDate]="maxDate"
                                    [placeholder]="'Date'"
                                >
                                </app-cib-date-picker>
                            </div>
                            <div fxFlex="30" *ngIf="selectedType === 'LC' || selectedType === 'BG'">
                                <mat-form-field fxFlex="100">
                                    <mat-label>Beneficiary Name</mat-label>
                                    <input
                                        type="text"
                                        aria-label="Beneficiary Name"
                                        matInput
                                        formControlName="beneficiaryName"
                                    />
                                </mat-form-field>
                            </div>
                        </div>

                        <div fxLayout="row" fxLayoutGap="3%">
                            <div fxFlex="30" *ngIf="selectedType === 'LC' || selectedType === 'BG'">
                                <mat-form-field fxFlex="100">
                                    <mat-label>Currency</mat-label>
                                    <mat-select aria-label="Type" formControlName="currency">
                                        <mat-option
                                            (onSelectionChange)="updateCurrency($event, type.code)"
                                            *ngFor="let type of currenciesList"
                                            [value]="type.code"
                                        >
                                            <span>{{ type.name }}</span>
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div fxFlex="30">
                                <mat-form-field fxFlex="100">
                                    <span *ngIf="selectedType === 'TRANSFER'" matPrefix>
                                        {{ selectedCurrency }} &nbsp;</span
                                    >
                                    <mat-label>Amount</mat-label>
                                    <input
                                        type="number"
                                        min="0"
                                        aria-label="Amount"
                                        matInput
                                        formControlName="amount"
                                    />
                                </mat-form-field>
                            </div>
                        </div>
                        <div fxFlex="50">
                            <button
                                type="submit"
                                mat-flat-button
                                (click)="search()"
                                [disabled]="checkForValidity()"
                                color="primary"
                            >
                                SEARCH
                            </button>
                        </div>
                    </div>
                </form>
                <div class="divider"></div>
                <div fxLayout="column" fxFlex="100" fxLayoutGap="1rem">
                    <mat-label>Search Results</mat-label>
                    <app-cib-table
                        [config]="tableConfig"
                        (_lazyLoad)="lazyLoad($event)"
                        (_clickCell)="onClickCell($event)"
                    ></app-cib-table>
                </div>
            </ng-container>
        </app-master-container>
    </div>
</div>
