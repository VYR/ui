<app-master-container>
    <ng-container header>Search Dividend Pay</ng-container>
    <ng-container icons>
        <button mat-icon-button (click)="resetView()">
            <i class="las la-sync"></i>
        </button>
    </ng-container>
    <ng-container body>
        <div fxFlex="100" fxLayout="column" fxLayoutGap="2rem">
            <form fxLayout="column" fxFlex="100" autocomplete="off" novalidate="novalidate" [formGroup]="searchForm">
                <div fxLayout="row" fxFlex="100" fxLayoutGap="1.5rem" fxLayout.sm="column">
                    <div fxFlex="30">
                        <app-cib-date-picker
                            [parentForm]="searchForm"
                            [fomrControlName]="'fromDate'"
                            [minDate]="minDate"
                            [maxDate]="maxDate"
                            [placeholder]="startDateLabel"
                            (selectDate)="getStartDate($event)"
                        ></app-cib-date-picker>
                    </div>
                    <div fxFlex="30">
                        <app-cib-date-picker
                            [parentForm]="searchForm"
                            [fomrControlName]="'toDate'"
                            [minDate]="minDate"
                            [maxDate]="maxDate"
                            [placeholder]="toDateLabel"
                            (selectDate)="getEndDate($event)"
                        ></app-cib-date-picker>
                    </div>
                    <mat-form-field fxFlex="30">
                        <mat-label>Qatar Id</mat-label>
                        <input type="text" [maxLength]="11" aria-label="qatarId" matInput formControlName="qatarId" />
                    </mat-form-field>
                </div>
                <div fxLayout="row" fxFlex="100" fxLayoutGap="1.5rem" fxLayout.sm="column">
                    <mat-form-field fxFlex="30">
                        <mat-label>NIN Number</mat-label>
                        <input type="text" aria-label="qatarId" matInput formControlName="ninNumber" />
                    </mat-form-field>
                    <mat-form-field fxFlex="30">
                        <mat-label>Transfer Mode</mat-label>
                        <mat-select aria-label="Purpose" formControlName="mode" multiple>
                            <mat-option *ngFor="let p of modes" [value]="p">{{ p }}</mat-option>
                        </mat-select>
                    </mat-form-field>
                    <mat-form-field fxFlex="30">
                        <mat-label>Status</mat-label>
                        <mat-select aria-label="Purpose" formControlName="status" multiple>
                            <mat-option *ngFor="let s of status" [value]="s">{{
                                s | cibDefinition: 'DIVIDEND_STATUS'
                            }}</mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div fxFlex="100" fxLayout="row" fxLayoutGap="0.5rem">
                    <button
                        fxFlex="10"
                        mat-button
                        [disabled]="!searchForm.valid"
                        class="mat-raised-button mat-primary"
                        aria-label="Submit"
                        (click)="searchDividendPay()"
                    >
                        SEARCH
                    </button>
                </div>
            </form>
        </div>
        <div fxFlex="100" fxLayoutAlign="end end" class="table-header">
            <button *ngIf="dividendList.length > 0" mat-icon-button (click)="generateExcel()">
                <i class="las la-file-excel"></i>
            </button>
            <button *ngIf="dividendList.length > 0" mat-icon-button (click)="generatePdf()">
                <i class="las la-file-pdf"></i>
            </button>
        </div>
        <app-cib-table
            [config]="tableConfig"
            (_clickCell)="onClickCell($event)"
            (_lazyLoad)="lazyLoad($event)"
        ></app-cib-table>
    </ng-container>
</app-master-container>
