<app-master-container>
    <ng-container header>Search Single/Multiple Transfer(s)</ng-container>
    <ng-container icons>
        <button mat-icon-button (click)="resetView()" #tooltip="matTooltip" matTooltip="Reset Filter">
            <i class="las la-sync"></i>
        </button>
    </ng-container>
    <ng-container body>
        <div fxFlex="100" fxLayout="column" fxLayoutGap="2rem">
            <form fxLayout="column" fxFlex="100" autocomplete="off" novalidate="novalidate" [formGroup]="searchForm">
                <div fxLayout="row" fxFlex="100" fxLayoutGap="1.5rem" fxLayout.sm="column">
                    <div fxFlex="30">
                        <app-cib-date-picker
                            [parentForm]="searchForm"
                            [fomrControlName]="'fromDate'"
                            [minDate]="minDate"
                            [maxDate]="maxDate"
                            [placeholder]="startDateLabel"
                            (selectDateRevFormat)="getStartDate($event)"
                        ></app-cib-date-picker>
                    </div>
                    <div fxFlex="30">
                        <app-cib-date-picker
                            [parentForm]="searchForm"
                            [fomrControlName]="'toDate'"
                            [minDate]="minDate"
                            [maxDate]="maxDate"
                            [placeholder]="toDateLabel"
                            (selectDateRevFormat)="getEndDate($event)"
                        ></app-cib-date-picker>
                    </div>
                    <mat-form-field fxFlex="30">
                        <mat-label>Transfer Type</mat-label>
                        <mat-select aria-label="Purpose" formControlName="type">
                            <mat-option *ngFor="let p of types" [value]="p">{{
                                p | cibDefinition: 'TRANSFER_TYPE'
                            }}</mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div fxLayout="row" fxFlex="100" fxLayoutGap="1.5rem" fxLayout.sm="column">
                    <mat-form-field fxFlex="30">
                        <mat-label>Beneficiary Name</mat-label>
                        <input type="text" aria-label="qatarId" matInput formControlName="benName" />
                    </mat-form-field>
                    <mat-form-field fxFlex="30">
                        <mat-label>Customer Reference</mat-label>
                        <input type="text" aria-label="customerRef" matInput formControlName="customerRef" />
                    </mat-form-field>
                    <mat-form-field fxFlex="30">
                        <mat-label>Currency</mat-label>
                        <mat-select formControlName="currency">
                            <mat-option value="all">ALL</mat-option>
                            <mat-option *ngFor="let s of currencyList" [value]="s?.id">
                                <span>{{ s?.label }}</span>
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div fxFlex="100" fxLayout="row" fxLayoutGap="0.5rem">
                    <button
                        fxFlex="10"
                        mat-button
                        [disabled]="!searchForm.valid"
                        class="mat-raised-button mat-primary"
                        aria-label="Submit"
                        (click)="reloadTable(params)"
                    >
                        SEARCH
                    </button>
                </div>
            </form>
        </div>
        <div class="divider"></div>
        <div fxFlex="100" fxLayoutAlign="end end" class="table-header">
            <button *ngIf="transferList.length > 0" mat-icon-button (click)="generateExcel()">
                <i class="las la-file-excel"></i>
            </button>
            <button *ngIf="transferList.length > 0" mat-icon-button (click)="generatePdf()">
                <i class="las la-file-pdf"></i>
            </button>
        </div>
        <app-cib-table
            [config]="tableConfig"
            (_clickCell)="onClickCell($event)"
            (_lazyLoad)="lazyLoad($event)"
        ></app-cib-table>
    </ng-container>
</app-master-container>
