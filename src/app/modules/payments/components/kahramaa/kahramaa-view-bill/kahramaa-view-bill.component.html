<div *ngIf="!showConfirmation">
    <app-master-container>
        <ng-container header>VIEW BILL</ng-container>
        <ng-container body>
            <div fxFlex="100">
                <form [formGroup]="viewBillForm" fxLayout="column" autocomplete="off" novalidate="novalidate">
                    <div fxLayout="row" fxLayoutGap="1.625rem">
                        <app-label-value
                            [label]="'Kahramaa Customer Number'"
                            [value]="data.kahramaaCustomerNumber"
                        ></app-label-value>

                        <app-label-value [label]="'QID/Estd ID'" [value]="data.qatarId"></app-label-value>
                    </div>

                    <div class="divider"></div>

                    <app-cib-table
                        [config]="tableConfig"
                        (_select)="onSelect($event)"
                        (_lazyLoad)="lazyLoad($event)"
                    ></app-cib-table>

                    <div class="divider"></div>

                    <div fxLayout="column" fxLayoutGap="1rem" *ngIf="kahramaaBillDetails.length > 0">
                        <div fxFlex="60">
                            <mat-form-field>
                                <span matPrefix> QAR &nbsp;</span>
                                <mat-label>Amount</mat-label>
                                <input
                                    type="number"
                                    min="0"
                                    aria-label="Amount"
                                    matInput
                                    formControlName="amount"
                                    readonly
                                />
                            </mat-form-field>
                        </div>
                        <ng-container *appHasEntitlementAccessTo="'PAYMENT_PAY_KAHRAMAA'">
                            <app-from-account
                                [parentForm]="viewBillForm"
                                [fromAccounts]="accountList"
                                (selectAccount)="onSelectAccount($event)"
                            ></app-from-account>
                            <div fxLayout="row">
                                <button
                                    mat-button
                                    class="mat-raised-button mat-primary"
                                    [disabled]="viewBillForm.invalid || selectedBils?.length === 0"
                                    (click)="payKahramaaBill('VERIFY')"
                                    aria-label="Submit"
                                >
                                    PAY NOW
                                </button>
                            </div>
                        </ng-container>
                    </div>
                </form>
            </div>
        </ng-container>
    </app-master-container>
</div>
<div #successBody *ngIf="showConfirmation">
    <app-cib-notification [headerTitle]="'PAYMENT STATUS'" [title]="title" [variant]="'success'">
        <ng-container body>
            <div flexLayout="row" fxLayout.lt-sm="column">
                <div fxFlex="33">
                    <app-label-value
                        [label]="'Kahramaa Customer No.'"
                        [value]="successData?.customerNumber"
                    ></app-label-value>
                </div>
                <div fxFlex="33">
                    <app-label-value [label]="'QID/ESTD ID'" [value]="successData?.qatarId"></app-label-value>
                </div>
                <div fxFlex="33">
                    <app-label-value
                        *ngIf="successData?.serviceNumber"
                        [label]="'Electricity No.'"
                        [value]="successData?.serviceNumber"
                    ></app-label-value>
                </div>
            </div>
            <div flexLayout="row" fxLayout.lt-sm="column">
                <div fxFlex="33">
                    <app-label-value [label]="'Debit Account'" [value]="successData?.debitAccountId"></app-label-value>
                </div>
                <div fxFlex="33">
                    <app-label-value [label]="'Currency'" [value]="successData?.currency"></app-label-value>
                </div>
                <div fxFlex="33">
                    <app-label-value
                        [label]="'Total Amount'"
                        [value]="successData?.totalAmount"
                        [type]="'amount'"
                    ></app-label-value>
                </div>
            </div>
            <mat-card-actions>
                <button mat-button class="mat-raised-button mat-primary" (click)="resetView()">OK</button>
            </mat-card-actions>
        </ng-container>
    </app-cib-notification>
</div>
