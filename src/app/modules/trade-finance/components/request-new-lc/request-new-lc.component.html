<app-master-container>
    <ng-container header>{{ pageTitle }}</ng-container>
    <ng-container icons>
        <button mat-icon-button class="docs" (click)="downloadLCDocs()">
            <i class="las la-paperclip"></i> Documents ({{ lcDocuments.length }})
        </button>
    </ng-container>

    <ng-container body>
        <div fxLayout="column" fxFlex="100">
            <form class="container" [formGroup]="amendForm">
                <app-master-container
                    [variant]="'secondary'"
                    #container
                    [collapsable]="true"
                    [opened]="expandAmendFlag"
                    *ngIf="amendFlag"
                >
                    <ng-container header>
                        <div>
                            <span
                                class="circle"
                                *ngIf="amendForm.pristine && amendForm.invalid"
                                [ngStyle]="{ 'background-color': 'grey' }"
                            ></span>
                            <span
                                class="circle"
                                *ngIf="amendForm.dirty && amendForm.invalid"
                                [ngStyle]="{ 'background-color': '#C4845D' }"
                            ></span>
                            <span
                                class="circle"
                                *ngIf="amendForm.valid"
                                [ngStyle]="{ 'background-color': '#58A618' }"
                            ></span>
                            AMENDMENT DETAILS
                        </div>
                    </ng-container>
                    <ng-container body>
                        <div fxLayout="column">
                            <div
                                fxLayout="row"
                                fxLayoutGap="2rem"
                                fxLayout.lt-md="column"
                                fxLayoutWrap
                                class="align-baseline wrap mt-1"
                            >
                                <mat-form-field>
                                    <mat-label>Amount</mat-label>
                                    <input
                                        type="number"
                                        min="0"
                                        maxlength="13"
                                        aria-label="Amount"
                                        matInput
                                        formControlName="lcAmendAmount"
                                    />
                                </mat-form-field>
                                <div>
                                    <app-cib-date-picker
                                        [parentForm]="amendForm"
                                        [fomrControlName]="'lcAmendExpiryDate'"
                                        [minDate]="minDate"
                                        ngDefaultControl
                                        (selectDate)="getLcAmendExpiryDate($event)"
                                        [placeholder]="'New Expiry Date'"
                                    >
                                    </app-cib-date-picker>
                                </div>
                                <div>
                                    <app-cib-date-picker
                                        [parentForm]="amendForm"
                                        [fomrControlName]="'lcAmendShipmentDate'"
                                        [minDate]="minDate"
                                        [maxDate]="amendForm.controls['lcAmendExpiryDate'].value"
                                        ngDefaultControl
                                        [placeholder]="'New Shipment date'"
                                    ></app-cib-date-picker>
                                </div>
                                <div fxFlex="45">
                                    <mat-form-field class="splInstr">
                                        <mat-label>Additional Amendment details</mat-label>
                                        <textarea
                                            matInput
                                            maxlength="1500"
                                            class="uppercase"
                                            formControlName="narrative"
                                        ></textarea>
                                        <mat-hint class="length-allowed">
                                            {{
                                                amendForm.controls['narrative'].value
                                                    ? amendForm.controls['narrative'].value.length
                                                    : 0
                                            }}/1500
                                        </mat-hint>
                                    </mat-form-field>
                                </div>
                                <div fxFlex="45">
                                    <mat-form-field class="splInstr">
                                        <mat-label>Comments to Bank</mat-label>
                                        <textarea
                                            matInput
                                            maxlength="200"
                                            class="uppercase"
                                            formControlName="lcComments"
                                        ></textarea>
                                        <mat-hint class="length-allowed">
                                            {{
                                                amendForm.controls['lcComments'].value
                                                    ? amendForm.controls['lcComments'].value.length
                                                    : 0
                                            }}/200
                                        </mat-hint>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div fxLayout="row" fxLayoutGap="1rem" class="mt-2">
                                <div fxFlex="40">
                                    <app-file-upload
                                        #fileUploadAmend
                                        [label]="'Document Upload'"
                                        [maxSize]="5"
                                        [isMultiple]="true"
                                        [accept]="'.png,.jpeg,.jpg,.pdf'"
                                        (_onUpload)="onFileSelectedAmend($event, fileUploadAmend)"
                                    >
                                    </app-file-upload>
                                </div>
                                <div class="file-details" fxFlex="50">
                                    <div *ngIf="selectedFilesAmend.length !== 0">SELECTED DOCUMENT</div>
                                    <ng-container>
                                        <div class="no-file" *ngIf="selectedFilesAmend.length === 0">
                                            No File Selected
                                        </div>
                                    </ng-container>
                                    <ng-container *ngFor="let file of selectedFilesAmend; let i = index">
                                        <div class="items">
                                            <div class="file-name">
                                                <i class="las la-check-circle"></i>
                                                <div class="label">{{ file.name }}</div>
                                            </div>
                                            <div>
                                                <button
                                                    mat-icon-button
                                                    aria-label="clear"
                                                    color="primary"
                                                    (click)="deleteSelectedFileAmend(i)"
                                                >
                                                    <i class="las la-trash"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </ng-container>
                                </div>
                                <div class="file-details" fxFlex="50" *ngIf="uploadedDocumentsAmend.length !== 0">
                                    <div *ngIf="uploadedDocumentsAmend.length !== 0">UPLOADED DOCUMENT</div>
                                    <ng-container *ngFor="let file of uploadedDocumentsAmend; let i = index">
                                        <div class="items">
                                            <div class="file-name">
                                                <i class="las la-check-circle"></i>
                                                <div class="label">{{ file.customerFileName }}</div>
                                            </div>
                                        </div>
                                    </ng-container>
                                </div>
                            </div>
                        </div>
                        <div fxLayout="column">
                            <mat-checkbox
                                aria-label="Terms and Conditions"
                                class="mt-1"
                                (change)="isCheckBoxAmendSelected($event)"
                            >
                                <span
                                    >I accept the <a href="#" download="downloadFileName">terms of service</a>. For
                                    Murabaha, Wadbishra/First time dealing/ local undertaking/other undertakings which
                                    are available in attachments must be submitted along with the application.
                                </span>
                            </mat-checkbox>
                            <mat-error *ngIf="!ischeckBoxAmendSelected">
                                You must accept the terms of service before you can proceed.</mat-error
                            >
                        </div>
                        <!--  added 1.25% FX fee for LC and LG  selectedLc.lcbasicDetails.lcCurrency  -->
                        <app-cib-fx-disclaimer
                            [fxThresholdTF]="selectedLc.lcbasicDetails?.lcCurrency === 'USD' ? true : false"
                            (checkboxValueEvent)="checkboxValueEvent($event)"
                        ></app-cib-fx-disclaimer>
                    </ng-container>
                </app-master-container>
            </form>
        </div>
        <div fxLayout="column" fxFlex="100">
            <form class="container" [formGroup]="form">
                <app-master-container
                    [variant]="'secondary'"
                    #container
                    [collapsable]="true"
                    [opened]="toggleBasicDetails"
                >
                    <ng-container header>
                        <div>
                            <span
                                class="circle"
                                *ngIf="lcbasicDetailsControls.pristine && lcbasicDetailsControls.invalid"
                                [ngStyle]="{ 'background-color': 'grey' }"
                            ></span>
                            <span
                                class="circle"
                                *ngIf="lcbasicDetailsControls.dirty && lcbasicDetailsControls.invalid"
                                [ngStyle]="{ 'background-color': '#C4845D' }"
                            ></span>
                            <span
                                class="circle"
                                *ngIf="lcbasicDetailsControls.valid"
                                [ngStyle]="{ 'background-color': '#58A618' }"
                            ></span>
                            LC BASIC DETAILS
                        </div>
                    </ng-container>
                    <ng-container body [formGroupName]="'lcbasicDetails'">
                        <ng-container>
                            <div
                                fxLayout="row"
                                fxLayout.lt-md="column"
                                fxLayoutWrap
                                class="align-baseline wrap"
                                [ngClass]="{ disableLC: disabled }"
                            >
                                <div fxFlex="50">
                                    <div class="label-checkbox">
                                        Choose LC Option<span class="accept-terms"> *</span>
                                    </div>
                                    <mat-button-toggle-group
                                        (change)="onLcOptionChange($event)"
                                        aria-label="Select an option"
                                        formControlName="lcOption"
                                    >
                                        <mat-button-toggle value="F">Financing LC</mat-button-toggle>
                                        <mat-button-toggle value="NF">Non Financing LC</mat-button-toggle>
                                    </mat-button-toggle-group>
                                    <div
                                        fxLayout="row"
                                        fxLayoutGap="3rem"
                                        fxLayout.lt-md="column"
                                        fxLayoutWrap
                                        class="align-baseline wrap mt-1"
                                    >
                                        <mat-form-field *ngIf="lcbasicDetailsControls.controls['lcOption'].value">
                                            <mat-label>Amount</mat-label>
                                            <input
                                                type="number"
                                                min="0"
                                                maxlength="13"
                                                aria-label="Amount"
                                                matInput
                                                formControlName="lcAmount"
                                            />
                                        </mat-form-field>
                                        <mat-form-field *ngIf="lcbasicDetailsControls.controls['lcOption'].value">
                                            <mat-label>Currency</mat-label>
                                            <mat-select
                                                aria-label="Currency"
                                                formControlName="lcCurrency"
                                                (selectionChange)="getCurrency($event.value)"
                                            >
                                                <mat-option *ngFor="let type of currenciesList" [value]="type.code">
                                                    <span>{{ type.name }}</span>
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                        <div *ngIf="lcbasicDetailsControls.controls['lcOption'].value">
                                            <mat-form-field>
                                                <mat-label>Amount in words</mat-label>
                                                <textarea
                                                    matInput
                                                    class="uppercase"
                                                    maxlength="200"
                                                    formControlName="lcAmountInWords"
                                                ></textarea>
                                                <mat-hint class="length-allowed">
                                                    {{
                                                        lcbasicDetailsControls.controls['lcAmountInWords'].value
                                                            ? lcbasicDetailsControls.controls['lcAmountInWords'].value
                                                                  .length
                                                            : 0
                                                    }}/200
                                                </mat-hint>
                                            </mat-form-field>
                                        </div>
                                        <mat-form-field *ngIf="lcbasicDetailsControls.controls['lcOption'].value">
                                            <mat-label>Expiry Place</mat-label>
                                            <mat-select aria-label="Expiry Place" formControlName="lcExpiryCountry">
                                                <mat-option
                                                    *ngFor="let country of countries; let i = index"
                                                    [value]="country.name"
                                                >
                                                    {{ country.name }}</mat-option
                                                >
                                            </mat-select>
                                        </mat-form-field>
                                        <div *ngIf="lcbasicDetailsControls.controls['lcOption'].value">
                                            <app-cib-date-picker
                                                [parentForm]="lcbasicDetailsControls"
                                                [fomrControlName]="'lcExpiryDate'"
                                                [minDate]="minDate"
                                                ngDefaultControl
                                                (selectDate)="getLcExpiryDate($event)"
                                                [placeholder]="'Expiry Date'"
                                            >
                                            </app-cib-date-picker>
                                        </div>
                                    </div>
                                    <div
                                        fxLayout="row"
                                        fxLayoutGap="3rem"
                                        fxLayout.lt-md="column"
                                        fxLayoutWrap
                                        class="align-baseline wrap mt-1"
                                        *ngIf="lcbasicDetailsControls.controls['lcOption'].value"
                                    >
                                        <div>
                                            <div class="label-checkbox">
                                                Lc to be advised by<span class="accept-terms"> *</span>
                                            </div>
                                            <mat-button-toggle-group
                                                aria-label="Select an option"
                                                (change)="lcAdiviceChange($event)"
                                                formControlName="lcToBeAdvisedBy"
                                            >
                                                <mat-button-toggle
                                                    [value]="type.name"
                                                    *ngFor="let type of settings?.lcToBeAdvisedBy; let i = index"
                                                    >{{ type.name }}</mat-button-toggle
                                                >
                                            </mat-button-toggle-group>
                                        </div>
                                        <div>
                                            <div class="label-checkbox">
                                                LC Confirmation<span class="accept-terms"> *</span>
                                            </div>
                                            <mat-button-toggle-group
                                                aria-label="Select an option"
                                                formControlName="lcConfirmation"
                                            >
                                                <mat-button-toggle
                                                    [value]="type.name"
                                                    *ngFor="let type of settings?.lcConfirmation; let i = index"
                                                    >{{ type.name }}</mat-button-toggle
                                                >
                                            </mat-button-toggle-group>
                                        </div>
                                    </div>
                                    <div
                                        fxLayout="row"
                                        fxLayoutGap="2rem"
                                        fxLayout.lt-md="column"
                                        fxLayoutWrap
                                        class="align-baseline wrap mt-1"
                                        *ngIf="lcbasicDetailsControls.controls['lcOption'].value === 'NF'"
                                    >
                                        <div>
                                            <div class="label-checkbox">
                                                LC to be issued against<span class="accept-terms"> *</span>
                                            </div>
                                            <mat-button-toggle-group
                                                aria-label="LC to be issued against"
                                                (change)="lcNfCurrenctLCOptionChange($event)"
                                                formControlName="lcNfCurrenctLCOption"
                                            >
                                                <mat-button-toggle
                                                    [value]="type.name"
                                                    *ngFor="let type of settings?.lcNfCurrenctLCOption; let i = index"
                                                >
                                                    {{ type.name }}</mat-button-toggle
                                                >
                                            </mat-button-toggle-group>
                                        </div>
                                        <div
                                            *ngIf="
                                                lcbasicDetailsControls.controls['lcNfCurrenctLCOption'].value ===
                                                'Against Margin'
                                            "
                                        >
                                            <div class="label-checkbox">
                                                Against Margin Options<span class="accept-terms"> *</span>
                                            </div>
                                            <mat-button-toggle-group
                                                aria-label="Against Margin Options"
                                                formControlName="lcAgainstMargin"
                                            >
                                                <mat-button-toggle
                                                    [value]="type.name"
                                                    *ngFor="let type of settings?.lcAgainstMargin; let i = index"
                                                    >{{ type.name }}</mat-button-toggle
                                                >
                                            </mat-button-toggle-group>
                                        </div>
                                    </div>
                                </div>
                                <div fxFlex="50">
                                    <div
                                        fxLayout="row"
                                        fxLayoutGap="2rem"
                                        fxLayout.lt-md="column"
                                        fxLayoutWrap
                                        class="align-baseline wrap mt-1"
                                    >
                                        <div *ngIf="lcbasicDetailsControls.controls['lcOption'].value === 'F'">
                                            <div class="label-checkbox">
                                                Choose Product Type<span class="accept-terms"> *</span>
                                            </div>
                                            <mat-button-toggle-group
                                                aria-label="Select an option"
                                                formControlName="lcProductType"
                                            >
                                                <mat-button-toggle
                                                    [value]="type.id"
                                                    *ngFor="let type of settings?.financeLCType; let i = index"
                                                    >{{ type.name }}
                                                </mat-button-toggle>
                                            </mat-button-toggle-group>
                                        </div>
                                        <div
                                            fxLayout="row"
                                            fxLayoutGap="2rem"
                                            fxLayout.lt-md="column"
                                            fxLayoutWrap
                                            class="align-baseline wrap mt-1"
                                            *ngIf="lcbasicDetailsControls.controls['lcOption'].value"
                                        >
                                            <div>
                                                <div class="label-checkbox">
                                                    Choose LC Type<span class="accept-terms"> *</span>
                                                </div>
                                                <mat-button-toggle-group
                                                    aria-label="Select an option"
                                                    (change)="selectedLcTypeChange($event)"
                                                    formControlName="selectedLcType"
                                                >
                                                    <mat-button-toggle
                                                        [value]="type.id"
                                                        *ngFor="let type of settings?.nonFinanceLCType; let i = index"
                                                        >{{ type.name }}</mat-button-toggle
                                                    >
                                                </mat-button-toggle-group>
                                            </div>
                                            <div>
                                                <div class="label-checkbox">
                                                    Tolerance Type<span class="accept-terms"> *</span>
                                                </div>
                                                <mat-button-toggle-group
                                                    aria-label="Select an option"
                                                    (change)="lcToleranceTypeChange($event)"
                                                    formControlName="lcToleranceType"
                                                >
                                                    <mat-button-toggle
                                                        [value]="type.name"
                                                        *ngFor="let type of settings?.lcToleranceType; let i = index"
                                                        >{{ type.name }}</mat-button-toggle
                                                    >
                                                </mat-button-toggle-group>
                                            </div>
                                        </div>
                                        <div
                                            fxLayout="row"
                                            fxLayoutGap="2rem"
                                            fxLayout.lt-md="column"
                                            fxLayoutWrap
                                            class="align-baseline wrap mt-1"
                                            *ngIf="lcbasicDetailsControls.controls['lcOption'].value"
                                        >
                                            <mat-form-field
                                                *ngIf="
                                                    lcbasicDetailsControls.controls['selectedLcType'].value === 'DEFPAY'
                                                "
                                            >
                                                <mat-label>Tenor</mat-label>
                                                <input
                                                    type="text"
                                                    class="uppercase"
                                                    aria-label="Tenor"
                                                    matInput
                                                    formControlName="lcTenor"
                                                />
                                                <mat-error *ngIf="lcbasicDetailsControls.controls['lcTenor'].invalid"
                                                    >Please enter valid Tenor</mat-error
                                                >
                                            </mat-form-field>
                                            <mat-form-field
                                                *ngIf="
                                                    lcbasicDetailsControls.controls['lcToleranceType'].value === 'About'
                                                "
                                            >
                                                <mat-label>Tolerance %</mat-label>
                                                <input
                                                    type="number"
                                                    min="0"
                                                    maxlength="2"
                                                    aria-label="Tolerance %"
                                                    matInput
                                                    formControlName="lcToleranceValue"
                                                />
                                            </mat-form-field>
                                        </div>

                                        <div *ngIf="lcbasicDetailsControls.controls['selectedLcType'].value">
                                            <div class="label-checkbox">
                                                Credit available by<span class="accept-terms"> *</span>
                                            </div>
                                            <mat-radio-group formControlName="lcCreditAvailableBy">
                                                <mat-radio-button
                                                    class="fullWidth"
                                                    [value]="type.name"
                                                    (change)="lcCreditAvailableByChange($event)"
                                                    *ngFor="let type of settings?.creditAvailableBy"
                                                    >{{ type.name }}
                                                </mat-radio-button>
                                            </mat-radio-group>
                                        </div>
                                        <div
                                            fxFlex="100"
                                            *ngIf="
                                                lcbasicDetailsControls.controls['selectedLcType'].value &&
                                                lcbasicDetailsControls.controls['lcCreditAvailableBy'].value ===
                                                    'By Mixed Payment'
                                            "
                                        >
                                            <mat-form-field>
                                                <mat-label>Mixed Payment Details</mat-label>
                                                <textarea
                                                    matInput
                                                    class="uppercase"
                                                    maxlength="300"
                                                    formControlName="lcMixedPaymentdetails"
                                                ></textarea>
                                                <mat-error
                                                    *ngIf="
                                                        lcbasicDetailsControls.controls['lcMixedPaymentdetails'].invalid
                                                    "
                                                    >Please enter valid Mixed Payment</mat-error
                                                >
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>
                                <div
                                    fxLayout="column"
                                    fxFlex="100"
                                    *ngIf="lcbasicDetailsControls.controls['lcOption'].value === 'NF'"
                                >
                                    <div class="label-checkbox">
                                        Select Charges Option<span class="accept-terms"> *</span>
                                    </div>
                                    <mat-radio-group formControlName="lcChargesType">
                                        <mat-radio-button
                                            class="fullWidth"
                                            [value]="type.value"
                                            *ngFor="let type of settings?.lcChargesTypeForNonFinance"
                                            >{{ type.name }}
                                        </mat-radio-button>
                                    </mat-radio-group>
                                </div>
                                <div
                                    fxLayout="column"
                                    fxFlex="100"
                                    *ngIf="lcbasicDetailsControls.controls['lcOption'].value === 'F'"
                                >
                                    <div class="label-checkbox">
                                        Select Charges Option<span class="accept-terms"> *</span>
                                    </div>
                                    <mat-radio-group formControlName="lcChargesType">
                                        <mat-radio-button
                                            class="fullWidth"
                                            [value]="type.value"
                                            *ngFor="let type of settings?.lcChargesTypeForFinance"
                                            >{{ type.name }}
                                        </mat-radio-button>
                                    </mat-radio-group>
                                </div>
                            </div>
                        </ng-container>
                    </ng-container>
                </app-master-container>

                <app-master-container
                    [variant]="'secondary'"
                    #container
                    [collapsable]="true"
                    [opened]="toggleBankDetails"
                >
                    <ng-container header>
                        <div>
                            <span
                                class="circle"
                                *ngIf="lcAdvicingBankDetailsControls.pristine && lcAdvicingBankDetailsControls.invalid"
                                [ngStyle]="{ 'background-color': 'grey' }"
                            ></span>
                            <span
                                class="circle"
                                *ngIf="lcAdvicingBankDetailsControls.dirty && lcAdvicingBankDetailsControls.invalid"
                                [ngStyle]="{ 'background-color': '#C4845D' }"
                            ></span>
                            <span
                                class="circle"
                                *ngIf="lcAdvicingBankDetailsControls.valid"
                                [ngStyle]="{ 'background-color': '#58A618' }"
                            ></span>
                            BENEFICIARY AND BANK DETAILS
                        </div>
                    </ng-container>
                    <ng-container body [formGroupName]="'lcAdvicingBankDetails'">
                        <ng-container>
                            <div
                                [ngClass]="{ disableLC: disabled }"
                                fxLayout="row"
                                fxLayoutGap="5rem"
                                fxLayout.lt-md="column"
                                fxLayoutWrap
                                class="align-baseline wrap"
                            >
                                <div
                                    fxFlex="100"
                                    *ngIf="lcbasicDetailsControls.controls['lcToBeAdvisedBy'].value !== 'Local LC'"
                                >
                                    <div class="label-checkbox">
                                        Credit available with<span class="accept-terms"> *</span>
                                    </div>
                                    <mat-button-toggle-group
                                        aria-label="Select an option"
                                        formControlName="lcCreditAvailableWith"
                                    >
                                        <mat-button-toggle
                                            [value]="type.name"
                                            *ngFor="let type of settings?.lcCreditAvailableWithSwift"
                                            >{{ type.name }}
                                        </mat-button-toggle>
                                    </mat-button-toggle-group>
                                </div>
                                <div
                                    fxFlex="100"
                                    *ngIf="lcbasicDetailsControls.controls['lcToBeAdvisedBy'].value === 'Local LC'"
                                >
                                    <div class="label-checkbox">
                                        Credit available with<span class="accept-terms"> *</span>
                                    </div>
                                    <mat-button-toggle-group
                                        aria-label="Select an option"
                                        formControlName="lcCreditAvailableWith"
                                    >
                                        <mat-button-toggle
                                            [value]="type.name"
                                            *ngFor="let type of settings?.lcCreditAvailableWithLocal"
                                            >{{ type.name }}
                                        </mat-button-toggle>
                                    </mat-button-toggle-group>
                                </div>
                                <mat-form-field>
                                    <mat-label>Swift Code</mat-label>
                                    <input
                                        type="text"
                                        class="uppercase"
                                        formControlName="lcSwiftCode"
                                        (blur)="validateSwift()"
                                        aria-label="Swift Code"
                                        matInput
                                    />
                                    <div class="errorMsg" *ngIf="validSwift">Invalid SWIFT code</div>
                                </mat-form-field>
                                <mat-form-field>
                                    <mat-label>Beneficiary Bank Address</mat-label>
                                    <input type="text" matInput class="uppercase" formControlName="lcBankAddress" />
                                    <mat-error
                                        *ngIf="lcAdvicingBankDetailsControls.controls['lcBankAddress']?.errors?.['pattern']"
                                    >
                                        Please enter valid Bank Address</mat-error
                                    >
                                </mat-form-field>
                                <mat-form-field>
                                    <mat-label>Beneficiary Bank</mat-label>
                                    <input type="text" matInput class="uppercase" formControlName="lcAdvisingBank" />
                                    <mat-error
                                        *ngIf="lcAdvicingBankDetailsControls.controls['lcAdvisingBank']?.errors?.['pattern']"
                                    >
                                        Please enter valid Bank Details</mat-error
                                    >
                                </mat-form-field>
                                <div>
                                    <mat-form-field>
                                        <mat-label>Beneficiary Name &amp; Address</mat-label>
                                        <input
                                            type="text"
                                            matInput
                                            class="uppercase"
                                            maxlength="140"
                                            formControlName="lcBeneficiaryName"
                                        />
                                        <mat-hint class="length-allowed">
                                            {{
                                                lcAdvicingBankDetailsControls.controls['lcBeneficiaryName'].value
                                                    ? lcAdvicingBankDetailsControls.controls['lcBeneficiaryName'].value
                                                          .length
                                                    : 0
                                            }}/140
                                        </mat-hint>
                                        <mat-error
                                            *ngIf="lcAdvicingBankDetailsControls.controls['lcBeneficiaryName']?.errors?.['pattern']"
                                        >
                                            Please enter valid Beneficiary Details</mat-error
                                        >
                                        <mat-error
                                            *ngIf="lcAdvicingBankDetailsControls.controls['lcBeneficiaryName']?.errors?.['maxlength']"
                                        >
                                            Please enter less than 140 characters</mat-error
                                        >
                                    </mat-form-field>
                                </div>
                            </div>
                        </ng-container>
                    </ng-container>
                </app-master-container>

                <app-master-container
                    [variant]="'secondary'"
                    #container
                    [collapsable]="true"
                    [opened]="toggleShipmentDetails"
                >
                    <ng-container header>
                        <div>
                            <span
                                class="circle"
                                *ngIf="lcShipmentDetailsControls.pristine && lcShipmentDetailsControls.invalid"
                                [ngStyle]="{ 'background-color': 'grey' }"
                            ></span>
                            <span
                                class="circle"
                                *ngIf="lcShipmentDetailsControls.dirty && lcShipmentDetailsControls.invalid"
                                [ngStyle]="{ 'background-color': '#C4845D' }"
                            ></span>
                            <span
                                class="circle"
                                *ngIf="lcShipmentDetailsControls.valid"
                                [ngStyle]="{ 'background-color': '#58A618' }"
                            ></span>
                            GOODS AND SHIPMENT DETAILS
                        </div>
                    </ng-container>
                    <ng-container body [formGroupName]="'lcShipmentDetails'">
                        <ng-container>
                            <div
                                [ngClass]="{ disableLC: disabled }"
                                fxLayout="row"
                                fxLayoutGap="2rem"
                                fxLayout.lt-md="column"
                                fxLayoutWrap
                                class="align-baseline wrap mt-1"
                            >
                                <div>
                                    <div class="label-checkbox">Inco Terms<span class="accept-terms"> *</span></div>
                                    <mat-button-toggle-group
                                        aria-label="Select an option"
                                        formControlName="selectedShippingMark"
                                    >
                                        <mat-button-toggle
                                            [value]="type.name"
                                            *ngFor="let type of settings?.lcShippingMarks"
                                            >{{ type.name }}
                                        </mat-button-toggle>
                                    </mat-button-toggle-group>
                                </div>
                                <div>
                                    <div class="label-checkbox">
                                        Partial Shipment/Delivery<span class="accept-terms"> *</span>
                                    </div>
                                    <mat-button-toggle-group
                                        aria-label="Select an option"
                                        formControlName="lcPartialShipmentFlag"
                                    >
                                        <mat-button-toggle
                                            [value]="type.name"
                                            *ngFor="let type of settings?.lcTranshipmentType"
                                            >{{ type.name }}
                                        </mat-button-toggle>
                                    </mat-button-toggle-group>
                                </div>
                                <div *ngIf="lcbasicDetailsControls.controls['lcToBeAdvisedBy'].value !== 'Local LC'">
                                    <div class="label-checkbox">Transhipment<span class="accept-terms"> *</span></div>
                                    <mat-button-toggle-group
                                        aria-label="Select an option"
                                        formControlName="lcTransShipmentFlag"
                                    >
                                        <mat-button-toggle
                                            [value]="type.name"
                                            *ngFor="let type of settings?.lcTranshipmentType"
                                            >{{ type.name }}
                                        </mat-button-toggle>
                                    </mat-button-toggle-group>
                                </div>
                                <div *ngIf="lcbasicDetailsControls.controls['lcToBeAdvisedBy'].value !== 'Local LC'">
                                    <div class="label-checkbox">
                                        Legalization from qatar embassy<span class="accept-terms"> *</span>
                                    </div>
                                    <mat-button-toggle-group
                                        aria-label="Select an option"
                                        formControlName="lcLegalization"
                                    >
                                        <mat-button-toggle
                                            [value]="type.name"
                                            *ngFor="let type of settings?.lcLegalization"
                                            >{{ type.name }}
                                        </mat-button-toggle>
                                    </mat-button-toggle-group>
                                </div>
                                <div *ngIf="lcbasicDetailsControls.controls['lcToBeAdvisedBy'].value !== 'Local LC'">
                                    <div class="label-checkbox">
                                        Insurance to be arranged by<span class="accept-terms"> *</span>
                                    </div>
                                    <mat-button-toggle-group
                                        aria-label="Select an option"
                                        formControlName="lcInsuranceOwner"
                                    >
                                        <mat-button-toggle
                                            [value]="type.name"
                                            *ngFor="let type of settings?.lcInsuranceOwner"
                                            >{{ type.name }}
                                        </mat-button-toggle>
                                    </mat-button-toggle-group>
                                </div>
                                <!--Mode of Transport-->
                                <div>
                                    <div class="label-checkbox">
                                        Mode of Transport<span class="accept-terms"> *</span>
                                    </div>
                                    <mat-button-toggle-group
                                        aria-label="Select an option"
                                        (change)="lcTransportOptionsChange($event)"
                                        formControlName="lcTransportOptions"
                                    >
                                        <mat-button-toggle
                                            [value]="type.id"
                                            *ngFor="let type of settings?.lcTransportOptions"
                                            >{{ type.name }}
                                        </mat-button-toggle>
                                    </mat-button-toggle-group>
                                </div>
                                <!-- /Mode of Transport-->
                            </div>
                            <div
                                [ngClass]="{ disableLC: disabled }"
                                fxLayout="row"
                                fxLayoutGap="2rem"
                                fxLayout.lt-md="column"
                                fxLayoutWrap
                                class="align-baseline wrap mt-1"
                            >
                                <mat-form-field
                                    *ngIf="lcShipmentDetailsControls.controls['lcTransportOptions'].value === 'AIR'"
                                >
                                    <mat-label>Airport of departure</mat-label>
                                    <input
                                        type="text"
                                        formControlName="lcShipmentAirportOfDep"
                                        class="uppercase"
                                        aria-label="Airport of departure"
                                        matInput
                                    />
                                </mat-form-field>
                                <mat-form-field
                                    *ngIf="lcShipmentDetailsControls.controls['lcTransportOptions'].value === 'AIR'"
                                >
                                    <mat-label>Airport of destination</mat-label>
                                    <input
                                        type="text"
                                        formControlName="lcShipmentAirportDesc"
                                        class="uppercase"
                                        aria-label="Airport of destination"
                                        matInput
                                    />
                                </mat-form-field>
                                <mat-form-field
                                    *ngIf="lcShipmentDetailsControls.controls['lcTransportOptions'].value === 'SEA'"
                                >
                                    <mat-label>Port of loading</mat-label>
                                    <input
                                        type="text"
                                        formControlName="lcShipmentPortLanding"
                                        class="uppercase"
                                        aria-label="Port of loading"
                                        matInput
                                    />
                                </mat-form-field>
                                <mat-form-field
                                    *ngIf="lcShipmentDetailsControls.controls['lcTransportOptions'].value === 'SEA'"
                                >
                                    <mat-label>Port of discharge</mat-label>
                                    <input
                                        type="text"
                                        formControlName="lcShipmentPortDischarge"
                                        class="uppercase"
                                        aria-label="Port of discharge"
                                        matInput
                                    />
                                </mat-form-field>
                                <mat-form-field
                                    *ngIf="lcShipmentDetailsControls.controls['lcTransportOptions'].value === 'TRUCK'"
                                >
                                    <mat-label>Place of receipt</mat-label>
                                    <input
                                        type="text"
                                        formControlName="lcShipmentPlaceOfRecipt"
                                        class="uppercase"
                                        aria-label="Place of receipt"
                                        matInput
                                    />
                                </mat-form-field>
                                <mat-form-field
                                    *ngIf="lcShipmentDetailsControls.controls['lcTransportOptions'].value === 'TRUCK'"
                                >
                                    <mat-label>Place of discharge</mat-label>
                                    <input
                                        type="text"
                                        formControlName="lcShipmentPlaceOfDelivery"
                                        class="uppercase"
                                        aria-label="Place of discharge"
                                        matInput
                                    />
                                </mat-form-field>
                                <div
                                    fxFlex="45"
                                    *ngIf="
                                        lcbasicDetailsControls.controls['lcToBeAdvisedBy'].value !== 'Local LC' &&
                                        lcShipmentDetailsControls.controls['lcInsuranceOwner'].value !== 'Beneficiary'
                                    "
                                >
                                    <mat-form-field class="splInstr">
                                        <mat-label>Insurance co name and address ( if any)</mat-label>
                                        <textarea
                                            matInput
                                            class="uppercase"
                                            formControlName="lcInsuranceApplicantDetails"
                                        ></textarea>
                                        <mat-error
                                            *ngIf="lcShipmentDetailsControls.controls['lcInsuranceApplicantDetails']?.errors?.['pattern']"
                                        >
                                            Please enter valid Insurance details</mat-error
                                        >
                                    </mat-form-field>
                                </div>
                                <div fxFlex="45">
                                    <mat-form-field class="splInstr">
                                        <mat-label>Swift Field (45A): Goods or Services Description</mat-label>
                                        <textarea
                                            matInput
                                            class="uppercase"
                                            maxlength="3500"
                                            formControlName="lcGoodsServiceDesc"
                                        ></textarea>
                                        <mat-hint class="length-allowed">
                                            {{
                                                lcShipmentDetailsControls.controls['lcGoodsServiceDesc'].value
                                                    ? lcShipmentDetailsControls.controls['lcGoodsServiceDesc'].value
                                                          .length
                                                    : 0
                                            }}/3500
                                        </mat-hint>
                                        <mat-error
                                            *ngIf="lcShipmentDetailsControls.controls['lcGoodsServiceDesc']?.errors?.['pattern']"
                                        >
                                            Please enter valid Description</mat-error
                                        >
                                    </mat-form-field>
                                </div>
                                <div
                                    fxFlex="45"
                                    *ngIf="lcbasicDetailsControls.controls['lcToBeAdvisedBy'].value !== 'Local LC'"
                                >
                                    <mat-form-field class="splInstr">
                                        <mat-label>Shipping Marks(if any)</mat-label>
                                        <textarea
                                            matInput
                                            class="uppercase"
                                            formControlName="lcShippingMarksText"
                                        ></textarea>
                                        <mat-error
                                            *ngIf="lcShipmentDetailsControls.controls['lcShippingMarksText']?.errors?.['pattern']"
                                        >
                                            Please enter valid Shipping Marks</mat-error
                                        >
                                    </mat-form-field>
                                </div>
                                <div
                                    fxFlex="45"
                                    *ngIf="lcbasicDetailsControls.controls['lcToBeAdvisedBy'].value !== 'Local LC'"
                                >
                                    <mat-form-field class="splInstr">
                                        <mat-label>Goods Origin</mat-label>
                                        <textarea matInput class="uppercase" formControlName="lcGoodsOrigin"></textarea>
                                        <mat-error
                                            *ngIf="lcShipmentDetailsControls.controls['lcGoodsOrigin']?.errors?.['pattern']"
                                        >
                                            Please enter valid Goods Origin details</mat-error
                                        >
                                    </mat-form-field>
                                </div>

                                <div>
                                    <mat-form-field>
                                        <mat-label>Period for presentation (no of days)</mat-label>
                                        <textarea
                                            matInput
                                            class="uppercase"
                                            maxlength="140"
                                            formControlName="lcPeriodForPresentation"
                                        ></textarea>
                                        <mat-hint class="length-allowed">
                                            {{
                                                lcShipmentDetailsControls.controls['lcPeriodForPresentation'].value
                                                    ? lcShipmentDetailsControls.controls['lcPeriodForPresentation']
                                                          .value.length
                                                    : 0
                                            }}/140
                                        </mat-hint>
                                        <mat-error
                                            *ngIf="lcShipmentDetailsControls.controls['lcPeriodForPresentation']?.errors?.['pattern']"
                                        >
                                            Please enter valid Period for Presentation</mat-error
                                        >
                                    </mat-form-field>
                                </div>
                                <div>
                                    <app-cib-date-picker
                                        [parentForm]="lcShipmentDetailsControls"
                                        [fomrControlName]="'lcLastShipmentDate'"
                                        [minDate]="minDate"
                                        [maxDate]="lcbasicDetailsControls.controls['lcExpiryDate'].value"
                                        ngDefaultControl
                                        [placeholder]="'Shipment/Delivery date'"
                                    ></app-cib-date-picker>
                                </div>
                            </div>
                        </ng-container>
                    </ng-container>
                </app-master-container>

                <app-master-container
                    [variant]="'secondary'"
                    #container
                    [collapsable]="true"
                    [opened]="toggleDocumentDetails"
                >
                    <ng-container header>
                        <div>
                            <span
                                class="circle"
                                [ngStyle]="{
                                    'background-color':
                                        docsRequested.length === 0 ||
                                        lcDocumentDetailsControls.invalid ||
                                        (selectedFiles.length === 0 && uploadedDocuments.length === 0)
                                            ? 'grey'
                                            : '#58A618'
                                }"
                            ></span
                            >DOCUMENTS
                        </div>
                    </ng-container>
                    <ng-container body [formGroupName]="'lcDocumentDetails'">
                        <div fxLayout="column" [ngClass]="{ disableLC: disabled }">
                            <div
                                fxLayout="row"
                                fxLayoutGap="2rem"
                                fxLayout.lt-md="column"
                                fxLayoutWrap
                                class="align-baseline wrap mt-1"
                            >
                                <mat-label fxFlex="100">
                                    Please select the documents to be uploaded<span class="accept-terms">
                                        *</span
                                    ></mat-label
                                >
                                <mat-checkbox
                                    fxFlex="45"
                                    aria-label="Select all"
                                    class="mt-1"
                                    (change)="selectAllDocs($event)"
                                    >Select all documents</mat-checkbox
                                >
                                <mat-checkbox
                                    fxFlex="45"
                                    aria-label="{{ type.name }}"
                                    class="mt-1"
                                    [checked]="type.selected || docsRequested.includes(type.name)"
                                    (change)="changeSelection($event, type)"
                                    *ngFor="let type of settings?.lcRequestedDocList"
                                    >{{ type.name }}</mat-checkbox
                                >
                                <div fxFlex="100">
                                    <mat-form-field class="splInstr">
                                        <mat-label>Swift Field (46A): Documents </mat-label>
                                        <textarea
                                            matInput
                                            class="uppercase"
                                            maxlength="3500"
                                            formControlName="lcDocsRequested"
                                        ></textarea>
                                        <mat-hint class="length-allowed">
                                            {{
                                                lcDocumentDetailsControls.controls['lcDocsRequested'].value
                                                    ? lcDocumentDetailsControls.controls['lcDocsRequested'].value.length
                                                    : 0
                                            }}/3500
                                        </mat-hint>
                                        <mat-error
                                            *ngIf="lcDocumentDetailsControls.controls['lcDocsRequested']?.errors?.['pattern']"
                                        >
                                            Please enter valid swift characters</mat-error
                                        >
                                    </mat-form-field>
                                </div>
                            </div>
                            <div fxLayout="row" fxLayoutGap="1rem">
                                <div fxFlex="40">
                                    <app-file-upload
                                        #fileUpload
                                        [label]="'Document Upload'"
                                        [maxSize]="5"
                                        [isMultiple]="true"
                                        [accept]="'.png,.jpeg,.jpg,.pdf'"
                                        (_onUpload)="onFileSelected($event, fileUpload)"
                                    >
                                    </app-file-upload>
                                </div>

                                <div class="file-details" fxFlex="50">
                                    <div *ngIf="selectedFiles.length !== 0">SELECTED DOCUMENT</div>
                                    <ng-container>
                                        <div class="no-file" *ngIf="selectedFiles.length === 0">No File Selected</div>
                                    </ng-container>
                                    <ng-container *ngFor="let file of selectedFiles; let i = index">
                                        <div class="items">
                                            <div class="file-name">
                                                <i class="las la-check-circle"></i>
                                                <div class="label">{{ file.name }}</div>
                                            </div>
                                            <div>
                                                <button
                                                    mat-icon-button
                                                    aria-label="clear"
                                                    color="primary"
                                                    (click)="deleteSelectedFile(i)"
                                                >
                                                    <i class="las la-trash"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </ng-container>
                                </div>
                                <div class="file-details" fxFlex="50" *ngIf="uploadedDocuments.length !== 0">
                                    <div *ngIf="uploadedDocuments.length !== 0">UPLOADED DOCUMENT</div>
                                    <ng-container *ngFor="let file of uploadedDocuments; let i = index">
                                        <div class="items">
                                            <div class="file-name">
                                                <i class="las la-check-circle"></i>
                                                <div class="label">{{ file.customerFileName }}</div>
                                            </div>
                                            <div>
                                                <button
                                                    mat-icon-button
                                                    aria-label="clear"
                                                    color="primary"
                                                    (click)="deleteuploadedDocuments(file, i)"
                                                >
                                                    <i class="las la-trash"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </ng-container>
                                </div>
                            </div>
                        </div>
                    </ng-container>
                </app-master-container>

                <app-master-container
                    [variant]="'secondary'"
                    #container
                    [collapsable]="true"
                    [opened]="toggleSplInstructionDetails"
                >
                    <ng-container header>
                        <div>
                            <span
                                class="circle"
                                *ngIf="
                                    form.controls['lcAdditionalInstructions'].pristine &&
                                    form.controls['lcAdditionalInstructions'].invalid
                                "
                                [ngStyle]="{ 'background-color': 'grey' }"
                            ></span>
                            <span
                                class="circle"
                                *ngIf="
                                    form.controls['lcAdditionalInstructions'].dirty &&
                                    form.controls['lcAdditionalInstructions'].invalid
                                "
                                [ngStyle]="{ 'background-color': '#C4845D' }"
                            ></span>
                            <span
                                class="circle"
                                *ngIf="form.controls['lcAdditionalInstructions'].valid"
                                [ngStyle]="{ 'background-color': '#58A618' }"
                            ></span>
                            SPECIAL INSTRUCTIONS
                        </div>
                    </ng-container>
                    <ng-container body>
                        <div
                            fxLayout="column"
                            fxLayoutGap="2rem"
                            fxLayout.lt-md="column"
                            fxLayoutWrap
                            class="wrap mt-1"
                            [ngClass]="{ disableLC: disabled }"
                        >
                            <div>
                                <mat-form-field class="splInstr">
                                    <mat-label>Swift Field (47A): Additional Conditions</mat-label>
                                    <textarea
                                        matInput
                                        class="uppercase"
                                        maxlength="3500"
                                        formControlName="lcAdditionalInstructions"
                                    ></textarea>
                                    <mat-hint class="length-allowed">
                                        {{
                                            form.controls['lcAdditionalInstructions'].value
                                                ? form.controls['lcAdditionalInstructions'].value.length
                                                : 0
                                        }}/3500
                                    </mat-hint>
                                    <mat-error *ngIf="form.controls['lcAdditionalInstructions']?.errors?.['pattern']">
                                        Please enter valid swift characters</mat-error
                                    >
                                </mat-form-field>
                            </div>
                            <div *ngIf="commentsHistory.length > 0">
                                <div class="cards-list">
                                    <ng-container *ngFor="let comments of commentsHistory; let i = index">
                                        <app-cib-card>
                                            <div class="card-details">
                                                <div class="name">
                                                    {{ comments.createdBy }}
                                                    <div class="card-number">
                                                        {{ comments.lcComments }}
                                                    </div>
                                                </div>
                                                <div class="status">
                                                    <span class="card-status">{{
                                                        comments.created | date: 'medium'
                                                    }}</span>
                                                </div>
                                            </div>
                                        </app-cib-card>
                                    </ng-container>
                                </div>
                            </div>
                            <div>
                                <mat-form-field class="splInstr">
                                    <mat-label>User Comments for Approver/Bank user</mat-label>
                                    <textarea
                                        matInput
                                        maxlength="200"
                                        class="uppercase"
                                        formControlName="lcComments"
                                    ></textarea>
                                </mat-form-field>
                                <mat-hint class="length-allowed">
                                    {{
                                        form.controls['lcComments'].value
                                            ? form.controls['lcComments'].value.length
                                            : 0
                                    }}/200
                                </mat-hint>
                            </div>
                        </div>
                    </ng-container>
                </app-master-container>
                <div fxLayout="column" *ngIf="!amendFlag">
                    <mat-checkbox aria-label="Terms and Conditions" class="mt-1" (change)="isCheckBoxSelected($event)">
                        <span
                            >I accept the <a href="#" download="downloadFileName">terms of service</a>. For Murabaha,
                            Wadbishra/First time dealing/ local undertaking/other undertakings which are available in
                            attachments must be submitted along with the application.
                        </span>
                    </mat-checkbox>
                    <mat-error *ngIf="!ischeckBoxLCSelected">
                        You must accept the terms of service before you can proceed.</mat-error
                    >
                </div>
                <!--  added 1.25% FX fee for LC and LG   -->
                <app-cib-fx-disclaimer
                    *ngIf="!amendFlag"
                    [fxThresholdTF]="lcCurrency === 'USD'"
                    (checkboxValueEvent)="checkboxValueEvent($event)"
                ></app-cib-fx-disclaimer>
            </form>
            <div class="divider"></div>
        </div>
        <div fxLayout="column" fxFlex="100">
            <div
                class="mt-1"
                fxLayout="row"
                fxLayoutGap="2rem"
                fxLayout.lt-md="column"
                fxLayoutAlign="center center center center center"
            >
                <button
                    mat-flat-button
                    fxFlex="10"
                    type="button"
                    (click)="cancelEdit()"
                    color="default"
                    *ngIf="action !== 'lcInitiation'"
                >
                    CANCEL
                </button>
                <ng-container *appHasEntitlementAccessTo="'TRADEFINANCE_IMPORT_LC_SAVE'">
                    <button
                        mat-flat-button
                        fxFlex="10"
                        type="button"
                        *ngIf="!amendFlag && action !== 'lcView'"
                        (click)="uploadFiles('SAVE')"
                        color="primary"
                    >
                        SAVE
                    </button>
                </ng-container>
                <ng-container *appHasEntitlementAccessTo="'TRADEFINANCE_IMPORT_LC_SUBMIT'">
                    <button
                        mat-flat-button
                        fxFlex="10"
                        type="button"
                        [disabled]="
                            form.invalid ||
                            !ischeckBoxLCSelected ||
                            !ischeckBoxAddSelected ||
                            (selectedFiles.length === 0 && uploadedDocuments.length === 0)
                        "
                        *ngIf="!amendFlag && action !== 'lcView'"
                        (click)="uploadFiles('SUBMIT')"
                        color="primary"
                    >
                        SUBMIT
                    </button>
                </ng-container>
                <ng-container *appHasEntitlementAccessTo="'LETTER_OF_CREDIT_PREVIEW'">
                    <button
                        mat-flat-button
                        fxFlex="10"
                        type="button"
                        [disabled]="form.invalid || !ischeckBoxLCSelected || !ischeckBoxAddSelected"
                        (click)="previewLC('view')"
                        *ngIf="!amendFlag && action !== 'lcView'"
                        color="primary"
                    >
                        PREVIEW
                    </button>
                </ng-container>
                <ng-container *appHasEntitlementAccessTo="'LETTER_OF_CREDIT_PREVIEW'">
                    <button
                        mat-flat-button
                        fxFlex="10"
                        type="button"
                        [disabled]="form.invalid || !ischeckBoxLCSelected || !ischeckBoxAddSelected"
                        (click)="previewLC('download')"
                        *ngIf="!amendFlag && action !== 'lcView'"
                        color="primary"
                    >
                        DOWNLOAD
                    </button>
                </ng-container>
                <ng-container *appHasEntitlementAccessTo="'TRADEFINANCE_LC_AMEND_SUBMIT'">
                    <button
                        mat-flat-button
                        fxFlex="10"
                        type="button"
                        [disabled]="amendForm.invalid || !ischeckBoxAmendSelected || !ischeckBoxAddSelected"
                        *ngIf="amendFlag && action !== 'lcView'"
                        (click)="submitAmendedLC()"
                        color="primary"
                    >
                        SUBMIT
                    </button>
                </ng-container>
                <ng-container *appHasEntitlementAccessTo="'LETTER_OF_CREDIT_AMENDMENT_PREVIEW'">
                    <button
                        mat-flat-button
                        fxFlex="10"
                        type="button"
                        [disabled]="amendForm.invalid || !ischeckBoxAmendSelected || !ischeckBoxAddSelected"
                        (click)="previewLCAmendment('view')"
                        *ngIf="amendFlag && action !== 'lcView'"
                        color="primary"
                    >
                        PREVIEW
                    </button>
                </ng-container>
                <ng-container *appHasEntitlementAccessTo="'LETTER_OF_CREDIT_AMENDMENT_PREVIEW'">
                    <button
                        mat-flat-button
                        fxFlex="10"
                        type="button"
                        [disabled]="amendForm.invalid || !ischeckBoxAmendSelected || !ischeckBoxAddSelected"
                        (click)="previewLCAmendment('download')"
                        *ngIf="amendFlag && action !== 'lcView'"
                        color="primary"
                    >
                        DOWNLOAD
                    </button>
                </ng-container>
            </div>
        </div>
    </ng-container>
</app-master-container>
